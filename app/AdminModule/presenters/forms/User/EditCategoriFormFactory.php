<?phpnamespace App\AdminModule\Presenters\Forms\User;use Nette\Application\UI\Form;use Nette\Security\User;use DbTable;/** * Tovarnicka pre formular na pridanie a editaciu kategorie * Posledna zmena 26.05.2016 *  * @author     Ing. Peter VOJTECH ml. <petak23@gmail.com> * @copyright  Copyright (c) 2012 - 2016 Ing. Peter VOJTECH ml. * @license * @link       http://petak23.echo-msz.eu * @version    1.0.0 */class EditCategoriFormFactory {  /** @var DbTable\User_categories */	private $user_categories;  /** @var array */	private $urovneReg;  /** @var int */  private $id_reg;  /**   * @param DbTable\User_categories $user_categories   * @param DbTable\Registracia $registracia   * @param User $user */  public function __construct(DbTable\User_categories $user_categories, DbTable\Registracia $registracia, User $user) {		$this->user_categories = $user_categories;    $this->id_reg = ($user->isLoggedIn()) ? $user->getIdentity()->id_registracia : 0;    $this->urovneReg = $registracia->hladaj_urovne(0, $this->id_reg)->fetchPairs('id', 'nazov'); //Hodnoty id=>nazov pre formulare z tabulky registracia	}    /**   * Formular pre pridanie alebo editaciu kategorie   * @return Form */  public function create()  {    $form = new Form();		$form->addProtection();    $form->addHidden('id');		$form->addText('nazov', 'Názov:', 30, 30)				 ->addRule(Form::MIN_LENGTH, 'Názov musí mať spoň %d znaky!', 3)				 ->setRequired('Názov musí byť zadaný!');    $form->addText('fa_class', 'Ikonka:', 30, 30);    if ($this->id_reg > 2) { $form->addSelect('id_registracia', 'Úroveň registrácie člena:', $this->urovneReg); }    $form->addSubmit('uloz', 'Ulož')         ->setAttribute('class', 'btn btn-success')         ->onClick[] = [$this, 'editCategoriFormSubmitted'];    $form->addSubmit('cancel', 'Cancel')->setAttribute('class', 'btn btn-default')         ->setValidationScope(FALSE);		return $form;	}    /**    * Spracovanie vstupov z formulara   * @param Nette\Forms\Controls\SubmitButton $button Data formulara */	public function editCategoriFormSubmitted($button)	{    $values = $button->getForm()->getValues();    try {			$this->user_categories->saveCategori($values);		} catch (Database\DriverException $e) {			$button->addError($e->getMessage());		}	}    }